/*! everthewayfarer 17-08-2016 */
!function(a){a.fn.visible=function(b,c,d){var e=a(this).eq(0),f=e.get(0),g=a(window),h=g.scrollTop(),i=h+g.height(),j=g.scrollLeft(),k=j+g.width(),l=e.offset().top,m=l+e.height(),n=e.offset().left,o=n+e.width(),p=b===!0?m:l,q=b===!0?l:m,r=b===!0?o:n,s=b===!0?n:o,t=c===!0?f.offsetWidth*f.offsetHeight:!0,d=d?d:"both";return"both"===d?!!t&&i>=q&&p>=h&&k>=s&&r>=j:"vertical"===d?!!t&&i>=q&&p>=h:"horizontal"===d?!!t&&k>=s&&r>=j:void 0}}(jQuery),jQuery(function(a){a(window).width()>767&&a("[data-full]").each(function(){var b=a(this).attr("data-full");a(this).attr("style",b),a(this).removeAttr("data-full")}),a(window).scroll(function(){a("#sidebar").visible(!0)||a("header").visible(!0)||a(".sidebar .stock").visible(!0)?a(".sidebar-follower").removeClass("fixed"):a(".sidebar-follower").addClass("fixed"),a(".article-subscribe").visible(!0)?a(".sidebar-subscribe").fadeOut():a(".sidebar-subscribe").fadeIn()}),a(".resources").length>0&&(a(".resources").addClass("hide"),a('<a href="javascript:void(0);" class="resources-open button">Expand</a>').prependTo(".resources"),a(".resources").on("click",".resources-open",function(){a(".resources").removeClass("hide"),a(".resources-open").fadeOut()})),a(document).on("click",".postcard-item",function(){if(a(this).hasClass("is-open"));else{a("body").addClass("postcard-is-open"),a(this).addClass("is-open");var b=a(this).attr("id");console.log(b+"-popout"),a("#"+b+"-popout").addClass("is-open").css("margin-top",a(window).scrollTop())}}),a(document).on("click",".postcard-item-close",function(b){a("body").removeClass("postcard-is-open"),a(".postcard-item.is-open, .postcard-item--popout.is-open").removeClass("is-open"),b.stopPropagation()}),a(document).ready(function(){a("[data-hide-visual]").on("click",function(){var b=a(this).attr("data-hide-visual");a('[data-visual="'+b+'"]').addClass("is-off")}),a(".subscribe-page").length>0&&a(".splash-overlay").remove(),a('.subscribe-page [data-fadein="true"]').addClass("fade-in").removeClass("is-under"),"seen"!=localStorage.getItem("popState")&&(a('.splash-overlay[data-fadein="true"], .splash-overlay [data-fadein="true"]').addClass("fade-in").removeClass("is-under"),localStorage.setItem("popState","seen"));var b=a(".nav-primary-1.active"),c=b.html();a(".page-active").html(c),b.remove()})});